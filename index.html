---
layout: default
title: Home
---
<div class="sections-view">
  {% assign tales = site.pages | where_exp:"p","p.url contains '/tales/'" %}
  {% assign notes = site.pages | where_exp:"p","p.url contains '/notes/'" %}

  <div class="grid">
    <!-- Tales / longform -->
    <section class="col">
      <header class="col-header"><h2>üìù Tales from the Independent</h2></header>
      <ul class="col-list">
        {% assign list = tales | sort: 'path' | reverse %}
        {% for entry in list limit: 20 %}
          <li>
            <a class="card" href="{{ entry.url | relative_url }}">
              {% assign hero = entry.images | first %}
              <div class="card-media">
                {% if hero %}
                  {% assign _src = hero.src %}
                  {% assign first = _src | slice: 0, 1 %}
                  {% assign cleaned = _src | replace: './', '' %}
                  {% if _src contains '://' %}
                    {% assign resolved = _src %}
                  {% elsif first == '/' %}
                    {% assign resolved = _src %}
                  {% else %}
                    {% assign base = entry.path | replace: entry.name, '' %}
                    {% assign resolved = '/' | append: base | append: cleaned %}
                  {% endif %}
                  <img src="{{ resolved | relative_url }}" alt="{{ hero.alt | default: '' }}">
                {% else %}
                  <img src="{{ '/assets/placeholders/placeholder_card_400x300.png' | relative_url }}" alt="">
                {% endif %}
              </div>
              <div class="card-body">
                <h3 class="card-title">{{ entry.title }}</h3>
                <p class="card-meta">
                  <time>{% include date.html doc=entry format="%b %-d, %Y" %}</time>
                </p>
                {% if entry.summary %}<p class="card-summary">{{ entry.summary }}</p>{% endif %}
              </div>
            </a>
          </li>
        {% endfor %}
      </ul>
    </section>

    {% comment %}
      Shortform sections map by entry.type:
      event | management | lostfound | safety | style | photo
    {% endcomment %}
    {% assign sections = 
      "Events Notice:event|From the Management:management|Lost & Found:lostfound|Safety Tips for Long Lives:safety|Style & Grace:style|Visions of Independent Living:photo" | split:"|" %}

    {% for s in sections %}
      {% assign pair = s | split:":" %}
      {% assign label = pair[0] %}
      {% assign type = pair[1] %}
      <section class="col">
        <header class="col-header"><h2>{{ label }}</h2></header>
        <ul class="col-list">
          {% assign list = notes | where: "type", type %}
          {% if type == 'event' %}
            {% assign list = list | sort: 'starts_at' %}
          {% else %}
            {% assign list = list | sort: 'path' | reverse %}
          {% endif %}

          {% for entry in list limit: 20 %}
            <li>
              <a class="card card-compact" href="{{ entry.url | relative_url }}">
                {% assign hero = entry.images | first %}
                <div class="card-media">
                  {% if hero %}
                    {% assign _src = hero.src %}
                    {% assign first = _src | slice: 0, 1 %}
                    {% assign cleaned = _src | replace: './', '' %}
                    {% if _src contains '://' %}
                      {% assign resolved = _src %}
                    {% elsif first == '/' %}
                      {% assign resolved = _src %}
                    {% else %}
                      {% assign base = entry.path | replace: entry.name, '' %}
                      {% assign resolved = '/' | append: base | append: cleaned %}
                    {% endif %}
                    <img src="{{ resolved | relative_url }}" alt="{{ hero.alt | default: '' }}">
                  {% else %}
                    <img src="{{ '/assets/placeholders/placeholder_card_400x300.png' | relative_url }}" alt="">
                  {% endif %}
                </div>
                <div class="card-body">
                  <h3 class="card-title">{{ entry.title }}</h3>
                  <p class="card-meta">
                    <time>
                      {% capture fmt %}{% if entry.section == 'notes' %}%b %-d, %Y ‚Ä¢ %l:%M %P{% else %}%b %-d, %Y{% endif %}{% endcapture %}
                      {% include date.html doc=entry format=fmt %}
                    </time>
                    {% if entry.location and type == 'event' %} ¬∑ {{ entry.location }}{% endif %}
                  </p>
                </div>
              </a>
            </li>
          {% endfor %}
        </ul>
      </section>
    {% endfor %}
  </div>
</div>

<!-- Timeline -->
<div class="timeline-view">
  {% assign tales = site.pages | where_exp:"p","p.url contains '/tales/'" %}
  {% assign notes = site.pages | where_exp:"p","p.url contains '/notes/'" %}
  {% assign all = tales | concat: notes | sort: 'path' | reverse %}
  <ul class="timeline-list">
    {% for entry in all limit: 40 %}
      <li class="tl-item">
        <a class="card" href="{{ entry.url | relative_url }}">
          {% assign hero = entry.images | first %}
          <div class="card-media">
            {% if hero %}
              {% assign _src = hero.src %}
              {% assign first = _src | slice: 0, 1 %}
              {% assign cleaned = _src | replace: './', '' %}
              {% if _src contains '://' %}
                {% assign resolved = _src %}
              {% elsif first == '/' %}
                {% assign resolved = _src %}
              {% else %}
                {% assign base = entry.path | replace: entry.name, '' %}
                {% assign resolved = '/' | append: base | append: cleaned %}
              {% endif %}
              <img src="{{ resolved | relative_url }}" alt="{{ hero.alt | default: '' }}">
            {% else %}
              <img src="{{ '/assets/placeholders/placeholder_card_400x300.png' | relative_url }}" alt="">
            {% endif %}
          </div>
          <div class="card-body">
            <h3 class="card-title">{{ entry.title }}</h3>
            <p class="card-meta">
              <time>
                {% capture fmt %}{% if entry.section == 'notes' %}%b %-d, %Y ‚Ä¢ %l:%M %P{% else %}%b %-d, %Y{% endif %}{% endcapture %}
                {% include date.html doc=entry format=fmt %}
              </time>
              {% if entry.type %} ¬∑ {{ entry.type }}{% endif %}
            </p>
            {% if entry.summary %}<p class="card-summary">{{ entry.summary }}</p>{% endif %}
          </div>
        </a>
      </li>
    {% endfor %}
  </ul>
</div>
